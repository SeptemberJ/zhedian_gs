(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/insert/index"],{"42cd":function(t,e,n){},"4d8b":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},"90b2":function(t,e,n){"use strict";var i=n("42cd"),o=n.n(i);o.a},"97f0":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("2f62");function o(t,e){return a(t)||s(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){o=!0,r=u}finally{try{i||null==a["return"]||a["return"]()}finally{if(o)throw r}}return n}function a(t){if(Array.isArray(t))return t}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){c(t,e,n[e])})}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){return n.e("components/input-autocomplete/input-autocomplete").then(n.bind(null,"982f"))},h={components:{inputAutocomplete:l},data:function(){return{ifNoWork:!1,hasSelect:!1,curChoosed1:"",curChoosed2:"",curChoosed3:"",empInputTxt:"",curEmpIdx:"",FDate:this.getDate({format:!0}),FBase1Txt:"",FBase2Txt:"",FBase1:"",FBase2:"",projectCurResult:[],newProjectCurResult:[],empCurResult:[],listData:[]}},onLoad:function(t){},computed:u({},(0,i.mapState)({urlPre:function(t){return t.urlPre},userInfo:function(t){return t.userInfo}}),{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}}),methods:{AddLine:function(){this.listData.push({fname:"",FEmp:"",FDecimal:""})},deleteLine:function(t){this.listData.splice(t,1)},bindDateChange:function(t){this.FDate=t.target.value},getDate:function(t){var e=new Date,n=e.getFullYear(),i=e.getMonth()+1,o=e.getDate();return"start"===t?n-=60:"end"===t&&(n+=2),i=i>9?i:"0"+i,o=o>9?o:"0"+o,"".concat(n,"-").concat(i,"-").concat(o)},save:function(){if(this.ifNoWork)return!1;if(!this.FBase1)return t.showToast({image:"/static/images/attention.png",title:"请选择项目!"}),!1;if(!this.FBase2)return t.showToast({image:"/static/images/attention.png",title:"请选择项目编号!"}),!1;this.listData.map(function(e){if(!e.FEmp||!e.FDecimal)return t.showToast({image:"/static/images/attention.png",title:"填写不完整!"}),!1});var e={FDate:this.FDate,FBase1:this.FBase1,FBase2:this.FBase2,FBase3:this.userInfo.fempid,items:this.listData};this.submit(e)},submit:function(e){var n=this;this.ifNoWork=!0,t.showLoading({title:"加载中"}),t.request({url:this.urlPre+"/insertGongshi",method:"POST",data:e,success:function(e){switch(e.data.code){case 0:t.hideLoading(),t.showToast({icon:"success",title:"保存成功!"}),n.listData=[],n.curChoosed1="",n.curChoosed2="",n.curChoosed3="",n.FBase1Txt="",n.FBase2Txt="",n.FBase1="",n.FBase2="",n.projectCurResult=[],n.newProjectCurResult=[],n.empCurResult=[],setTimeout(function(){n.ifNoWork=!1},1500);break;default:t.hideLoading(),t.showToast({image:"/static/images/attention.png",title:"服务器繁忙!"}),n.ifNoWork=!1}},fail:function(e){console.log("request fail",e," at pages\\insert\\index.vue:220"),t.hideLoading(),t.showModal({content:e.errMsg,showCancel:!1})}})},loadAutocompleteData1:function(e){var n=this;return e?t.request({url:"http://10.206.0.201:8081/baojiaJK/serFitemList?fname="+encodeURIComponent(e),method:"GET"}).then(function(t){var e=o(t,2),i=(e[0],e[1]),r=i.data.itmelist;n.$emit("updateSelect1",r);var s=r.map(function(t){return t.FName.toString()});return Promise.resolve(s)}):Promise.resolve([])},loadAutocompleteData2:function(e){var n=this;return e?t.request({url:"http://10.206.0.201:8081/baojiaJK/serProList?FID="+e,method:"GET"}).then(function(t){var e=o(t,2),i=(e[0],e[1]),r=i.data.prolist;n.$emit("updateSelect2",r);var s=r.map(function(t){return t.FID.toString()});return Promise.resolve(s)}):Promise.resolve([])},loadAutocompleteData3:function(e){var n=this;return e?t.request({url:"http://10.206.0.201:8081/baojiaJK/serEmpList?fname="+encodeURIComponent(e),method:"GET"}).then(function(t){var e=o(t,2),i=(e[0],e[1]),r=i.data.emplist;n.$emit("updateSelect3",r);var s=r.map(function(t){return t.fname.toString()});return Promise.resolve(s)}):Promise.resolve([])},updateSelect1:function(t){this.projectCurResult=t},updateSelect2:function(t){this.newProjectCurResult=t},updateSelect3:function(t){this.empCurResult=t},checkProjectName:function(t){return t.FName==this.curChoosed1},checkNewProject:function(t){return t.FID==this.curChoosed2},checkProjecEmp:function(t){return t.fname==this.curChoosed3},selectItemD1:function(t){this.curChoosed1=t;var e=this.projectCurResult.filter(this.checkProjectName)[0];this.FBase1=e.FItemID},selectItemD2:function(t){this.curChoosed2=t;var e=this.newProjectCurResult.filter(this.checkNewProject)[0];this.FBase2=e.FInterID},selectItemEmp:function(t){console.log("selectItemEmp--------"," at pages\\insert\\index.vue:313"),this.hasSelect=!0,this.curChoosed3=this.listData[t].fname;var e=this.empCurResult.filter(this.checkProjecEmp)[0];this.listData[t].FEmp=e.fitemid},blurProjectName:function(e){e&&!this.FBase1&&(t.showToast({image:"/static/images/attention.png",title:"该项目不存在!"}),this.FBase1Txt="")},blurNewProject:function(e){e&&!this.FBase1&&(t.showToast({image:"/static/images/attention.png",title:"该编号不存在!"}),this.FBase2Txt="")},checkProjecEmpInput:function(t){return console.log("this.empInputTxt--",this.empInputTxt," at pages\\insert\\index.vue:339"),t.fname==this.empInputTxt},setIputIdx:function(t){this.hasSelect=!1,this.curEmpIdx=t},blurEMP:function(e){if(console.log("blurEMP-------------"," at pages\\insert\\index.vue:347"),console.log(e," at pages\\insert\\index.vue:348"),this.empInputTxt=e||this.listData[this.curEmpIdx].fname,this.hasSelect)console.log("else-----------"," at pages\\insert\\index.vue:367");else{var n=this.empCurResult.filter(this.checkProjecEmpInput)[0];console.log(n," at pages\\insert\\index.vue:353"),!n&&e&&(t.showToast({image:"/static/images/attention.png",title:"该员工不存在!"}),this.listData[this.curEmpIdx].fname="",this.listData[this.curEmpIdx].FEmp=""),n&&e&&(this.listData[this.curEmpIdx].fname=n.fname,this.listData[this.curEmpIdx].FEmp=n.fitemid)}},selectItemS:function(t){console.log("收到数据了:",t," at pages\\insert\\index.vue:372")},printLog:function(){}}};e.default=h}).call(this,n("6e42")["default"])},a33d:function(t,e,n){"use strict";n.r(e);var i=n("97f0"),o=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);e["default"]=o.a},b363:function(t,e,n){"use strict";n.r(e);var i=n("4d8b"),o=n("a33d");for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);n("90b2");var s=n("2877"),a=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=a.exports}},[["5157","common/runtime","common/vendor"]]]);